<!doctype html>
<html lang="en">
<head>
	<title>Little Red Crib</title>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


	<script>
		

      // var xhr = new XMLHttpRequest();
      // xhr.timeout = 2000;
      // xhr.onreadystatechange = function(e){
      //     // console.log(this);
      //     if (xhr.readyState === 4){
      //       if (xhr.status === 200){            
      //       // filter out the key value pairs u need
      //       res = JSON.parse(xhr.response);   
      //       alert(res);

      //     } else {
      //       console.error("XHR didn't work: ", xhr.status);
      //     }
      //   }
      // }
      // xhr.ontimeout = function (){
      //   console.error("request timedout: ", xhr);
      // }
      // xhr.open("get", "http://localhost:3000/environment", /*async*/ true);
      // xhr.send();
  


  // default All so display straight away


  // drop down selcteion change
  selVal =  $('#localeDDL').val();
  console.log(selVal);

      var xhr = new XMLHttpRequest();
      xhr.timeout = 2000;
      xhr.onreadystatechange = function(e){
          // console.log(this);
          if (xhr.readyState === 4){
            if (xhr.status === 200){            
            // filter out the key value pairs u need
            res = JSON.parse(xhr.response);    
            // Use performTask to plot N amount of pins at a time (every 10ms)
            
            // Testing remove marker
	        console.log(res);

	        var html;
	        html = '<table class="editable">' +
    '<tr id="r0">' +
        '<td class="left">' + res[0].level + '</td>' +
        '<td class="center">' + res[0].day_night + '</td>' +
        '<td class="right">' + res[0].map + '</td>' +
        '<td class="right">' + res[0].vehicle + '</td>' +
        '<td class="right">' + res[0].pedestrian + '</td>' +
    '</tr>' +
'</table>';
            
            $('#table').append(html);



          } else {
            console.error("XHR didn't work: ", xhr.status);
          }
        }
      }
      xhr.ontimeout = function (){
        console.error("request timedout: ", xhr);
      }
      xhr.open("get", "http://localhost:3000/environment/", /*async*/ true);
      xhr.send();

	</script>
</head>
<body style="margin: 0; background: #ffffff;">

	<!--Start of slidebar windows here-->
	
	<button onclick="show()"> click</button>
	<div id="table"></div>

</body>
</html>
